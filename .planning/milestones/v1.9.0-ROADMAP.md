# Roadmap: v1.9.0 Codebase Intelligence System

## Overview

This milestone delivers a living knowledge system that learns codebase structure and conventions as Claude writes code, then injects that understanding into every session. The build order is: learning mechanism (PostToolUse hook) -> injection mechanism (SessionStart hook) -> brownfield analysis command -> GSD workflow integration.

## Phases

- [x] **Phase 1: Foundation & Learning** - Index store, PostToolUse hook, file parsing ✓
- [ ] **Phase 2: Context Injection** - SessionStart hook, convention detection, summary generation
- [ ] **Phase 3: Brownfield & Integration** - analyze-codebase command, GSD integration, documentation

## Phase Details

### Phase 1: Foundation & Learning
**Goal**: Claude learns from every file it writes, building an index of the codebase structure
**Depends on**: Nothing (first phase)
**Requirements**: INDEX-01, INDEX-02, INDEX-03, INDEX-04, INDEX-05, CONV-06
**Success Criteria** (what must be TRUE):
  1. When Claude writes or edits a file, the file's exports and imports are captured in `.planning/intel/index.json`
  2. Index updates incrementally (only the changed file is reprocessed)
  3. Hook failures never block Claude — any error results in silent failure with `{ proceed: true }`
  4. Index file exists at `.planning/intel/index.json` with valid JSON structure
**Plans:** 2 plans

Plans:
- [x] 01-01-PLAN.md — Index store and data model ✓
- [x] 01-02-PLAN.md — PostToolUse indexing hook ✓

### Phase 2: Context Injection
**Goal**: Claude receives codebase understanding automatically at session start
**Depends on**: Phase 1
**Requirements**: CTX-01, CTX-02, CTX-03, CTX-04, CTX-05, CONV-01, CONV-02, CONV-03, CONV-04, CONV-05
**Success Criteria** (what must be TRUE):
  1. When a Claude session starts, codebase summary is injected wrapped in `<codebase-intelligence>` tags
  2. Summary includes detected naming conventions (camelCase, PascalCase, etc.) with confidence thresholds met (5+ files, 70%+ match)
  3. Summary includes directory structure overview and key exports by category
  4. Conventions are stored in `.planning/intel/conventions.json`
  5. Summary regenerates when conventions change
**Plans**: TBD

Plans:
- [ ] 02-01: Convention detection engine
- [ ] 02-02: SessionStart injection hook and summary generation

### Phase 3: Brownfield & Integration
**Goal**: Codebase intelligence works on existing codebases and integrates with GSD workflows
**Depends on**: Phase 2
**Requirements**: BROWN-01, BROWN-02, BROWN-03, BROWN-04, BROWN-05, BROWN-06, INT-01, INT-02, INT-03, INT-04, DOC-01, DOC-02, DOC-03
**Success Criteria** (what must be TRUE):
  1. `/gsd:analyze-codebase` command scans existing codebase and populates `.planning/intel/`
  2. Command works without `/gsd:new-project` — standalone operation on any codebase
  3. After initial analysis, hooks continue incremental learning
  4. `install.js` registers intel hooks in settings.json
  5. `/gsd:new-project` creates `.planning/intel/` directory structure
  6. Subagent prompts include codebase context
  7. README, help.md, and GSD-STYLE.md document the codebase intelligence feature
**Plans**: TBD

Plans:
- [ ] 03-01: analyze-codebase command
- [ ] 03-02: GSD integration (installer, new-project, subagents)
- [ ] 03-03: Documentation updates

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Foundation & Learning | 2/2 | ✓ Complete | 2026-01-20 |
| 2. Context Injection | 0/2 | Not started | - |
| 3. Brownfield & Integration | 0/3 | Not started | - |
